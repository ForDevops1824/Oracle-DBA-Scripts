USER CREATION AND EXPORT AND IMPORT QUERIES
==============================================================================
BEFORE CREATE USER PRE_CHECK
		SELECT * FROM DBA_USERS WHERE USERNAME=UPPER('&USER_NAME');
		SELECT SUM(BYTES/1024/1024/1024) FROM DBA_SEGMENTS WHERE OWNER=UPPER('&USER_NAME');
		SELECT COUNT(*) FROM DBA_OBJECTS WHERE OWNER=UPPER('USER_NAME');
		SELECT OWNER,COUNT(OBJECT_TYPE) "COUNT", OBJECT_TYPE
			FROM ALL_OBJECTS WHERE OWNER=UPPER('USER_NAME') GROUP BY OWNER,OBJECT_TYPE;
		SELECT SEGMENT_TYPE,COUNT(*),TABLESPACE_NAME FROM DBA_SEGMENTS WHERE OWNER=UPPER('USER_NAME') 
			GROUP BY SEGMENT_TYPE, TABLESPACE_NAME ORDER BY 3;

select segment_name,segment_type, sum(bytes/1024/1024/1024) GB from dba_segments where segment_name='&Your_Table_Name' group by segment_name,segment_type;

CREATE USER USER_NAME IDENTIFIED BY BCFDRP14F2 DEFAULT TABLESPACE TABLESPACE01 PROFILE IOCL_SMALL_PROFILE;
GRANT UNLIMITED TABLESPACE TO USER_NAME;
GRANT CONNECT,RESOURCE TO USER_NAME;
GRANT CREATE TABLE, CREATE VIEW,CREATE SEQUENCE,CREATE PROCEDURE TO USER_NAME;

select owner,table_name,num_rows from dba_tables where table_name in ('ALL_ASSET','LOCATION','PO_DETAILS','ROLE_MASTER');

SELECT DIRECTORY_NAME,DIRECTORY_PATH FROM DBA_DIRECTORIES;

IF DIRECTORY NOT EXITS :-
--------------------------------------------------


CREATE A DATAPUMP FOLDER IN SITE BACKUP OR ORALCE
		MKDIR DATAPUMP	(IN ORACLE PROMPT)
CONNECT TO SQL
		CREATE OR REPLACE DIRECTORY DATAPUMP AS '/BACKUP/DATAPUMP';
		GRANT READ,WRITE ON DIRECTORY DATAPUMP TO SYSTEM;	

EXPORT
-----------
BEFORE EXPORT PRE_CHECK:
	1.	FIND SIZE OF EXPORT FULL/SCHEMA/TABLE:
			EXPDP DIRECTORY=DATAPUMP CONTENT=ALL SCHEMAS=TT_CREW EXCLUDE=STATISTICS ESTIMATE_ONLY=YES;
	2.	CHECK AS PER EXPORT FILE SIZE SPACE AVALIABLE OR NOT IN MOUNT_POINT.
	3.	IF METADATA ONLY THEN USE PARAMETER [CONTENT=METADATA_ONLY]
		
FULL DATABASE :-
EXPDP DIRECTORY=DATAPUMP FULL=Y DUMPFILE=EXPORT_DATABASENAME_FULL_DATE.DMP LOGFILE=EXPORT_DATABASENAME_FULL_DATE.LOG PARALLEL=2;

FOR SCHEMA LEVEL :-
EXPDP DIRECTORY=DATAPUMP SCHEMAS=SCHEMA_NAME DUMPFILE=EXPORT_SCHEMANAME_DATE.DMP LOGFILE=EXPORT_SCHEMANAME_DATE.LOG CONTENT=ALL EXCLUDE=STATISTICS VERSION=11.2;

FOR TABLE LEVEL :-
EXPDP DIRECTORY=DATAPUMP TABLES=SCHEMA_NAME.TABLE_NAME DUMPFILE=EXPORT_NAME_DATE.DMP LOGFILE=EXPORT_NAME_DATE.LOG;

ONCE EXPORT COMPLETED THEN CHECK LOG FILES FOR COUNT OF TABLE,ROW AND ANY ERROR. 
//SCP EXPORT_FILENAME.DMP ORACLE@SERVERIP:LOCATION 
SCP EXPORT_SCHEMANAME_DATE.DMP ORACLE@10.146.66.18:/BACKUP


If to exclude particular tables/schemas:-
==================================================
SELECT * FROM DBA_USERS WHERE USERNAME=UPPER('CMSRO');

EXCLUDE=SCHEMA:"IN('SYS','SYSTEM','SYSMAN','DBSNMP','OUTLN','APPQOSSYS')"
EXCLUDE=TABLE:"IN(select table_name from dba_tables where table_name like '_\_%')"
EXCLUDE=TABLE:"IN('CUSTOMER','ORDOR)"

For single table :
==============
expdp directory=DATAPUMP schemas=REMS DUMPFILE=export_REMS_02082022_1.dmp LOGFILE=export_REMS_02082022_1.log exclude=table:"IN('REMS_REF_SAP_CONNECTION')" CONTENT=ALL;


==============
for Multiple table :
expdp directory=DATAPUMP schemas=DBA2 DUMPFILE=export_DBA2_25102022.dmp LOGFILE=export_DBA2_25102022.log exclude=table:"IN\('LPD_NEW'\,'TEST_NEW'\)";

IMPORT
--------------------------
BEFORE IMPORT PRE_CHECK:
	1.	USER EXIST OR NOT. IF NOT THEN CREATE USER AS PER CLIENT PROVIDE
	2.  CHECK TABLESPACE SIZE. IF NOT AVALIABLE OR LESS AMOUNT OF SIZE AVALIABLE THEN ADD DATAFILE IN TABLESPACE (NEED APPORAVAL FROM CLIENT)
	3.  TABLESPACE DETAILS OF EXPORT SERVER. IF TABLESPACE IS NOT SAME OR MULTIPLE TABLESPACE EXIST THEN USE REMAP_TABLESPACE
	4.	EXPORT SCHEMA/TABLE SAME AS IMPORT SCHEMA/TABLE OR NOT. IF NOT THEN USE REMAP_SCHEMA/REMAP_TABLE 

REMAP_TABLESPACE=TABLESPACE_NAME_EXPORT:TABLESPACE_NAME_IMPORT
REMAP_SCHEMAS=SCHEMA_NAME_EXPORT:SCHEMA_NAME_IMPORT
REMAP_TABLE=SCHEMA_NAME.TABLE_NAME_EXPORT:SCHEMA_NAME.TABLE_NAME_IMPORT

IMPDP DIRECTORY=DATAPUMP SCHEMAS=SCHEMA_NAME DUMPFILE=EXPORT_SCHEMANAME_DATE.DMP LOGFILE=EXPORT_SCHEMANAME_DATE.LOG REMAP_TABLESPACE=INSPECTION_DATA:USERS TABLE_EXISTS_ACTION=REPLACE CONTENT=ALL EXCLUDE=STATISTICS;

AFTER COMPLETED ALL ACTIVITY OF EXPORT AND IMPORT CHECK TABLE AND ROW COUNT OF TABLE ARE SAME BOTH EXPORT SERVER AND IMPORT SERVER OR NOT.
		1. CHECK BOTH EXPORT AND IMPORT LOG FOR COUNT SAME OR NOT
		2. SELECT OWNER,OBJECT_TYPE, COUNT(*) "OBJECT_COUNT" FROM ALL_OBJECTS WHERE OWNER IN ('SCHEMANAME') GROUP BY OWNER, OBJECT_TYPE ORDER BY 1,2;
		3. SELECT OWNER,TABLE_NAME,NUM_ROWS FROM DBA_TABLES WHERE OWNER IN ('SCHEMANAME') ORDER BY 1,2;
	
	exec dbms_stats.gather_schema_stats(ownname=>'AV_DOCS',estimate_percent=>100,degree=>4,cascade=>true,no_invalidate=>false);
	
	
select table_name, stale_stats, last_analyzed  from dba_tab_statistics where stale_stats='YES';

SELECT 'exec dbms_stats.gather_table_stats('||''''|| owner||''''||','||''''||TABLE_NAME||''''||',estimate_percent=>DBMS_STATS.AUTO_SAMPLE_SIZE,method_opt=>'||'''FOR ALL COLUMNS SIZE AUTO'''||',CASCADE=>TRUE);'FROM dba_tab_statistics where stale_stats='YES';












expdp DIRECTORY=DATAPUMP FULL=Y DUMPFILE=EXPORT_DATABASENAME_FULL_DATE.DMP LOGFILE=EXPORT_DATABASENAME_FULL_DATE.LOG PARALLEL=2 VERSION=11.2;












